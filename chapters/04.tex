\chapter{External specification}

\section{System requirements}

A PC (personal computer) is required to run the application.
The application can run on the Windows, macOS and Linux operating systems.
The application requires approximately 100 MB of storage space.
The application was mainly tested on a laptop device with the following software and hardware configuration:

\bigskip

\begin{tabularx}{0.9\linewidth}{l X}
    CPU & AMD Ryzen 7 5800H \\
    GPU & NVIDIA GeForce RTX 3050 \\
    RAM & 16 GB \\
    Operating system & Windows 11 \\
\end{tabularx}

\bigskip

The application performed smoothly on the device.
Due to limited access to other hardware, the application could not be tested on low-end devices to establish minimum system requirements accurately.
The Godot Engine documentation specifies the following as the minimum system requirements for a simple 2D or 3D project \cite{godotspecsdocs}:

\bigskip

\begin{tabularx}{0.9\linewidth}{l X}
    CPU & x86\_32 CPU with SSE2 support, x86\_64 CPU with SSE4.2 support, ARMv8 CPU \\
    GPU & Integrated graphics with full Vulkan 1.0 support, Metal 3 support (macOS) or Direct3D 12 (12\_0 feature level) support (Windows) \\
    RAM & 2 GB \\
    Operating system & Windows 10, macOS 10.15, Linux distribution released after 2018
\end{tabularx}

\section{Installation}

The application does not require installation on any supported platform.
It is launched directly from the appropriate executable.

The application was tested only on the Windows operating system.
As such, the instructions for other operating systems may contain errors.

\subsection{Windows}

For the Windows operating system, the application is provided as a single executable file.
To start the application, the user should run the \textbf{GeoApp.exe} executable.

Depending on system security settings, Windows may display a warning about an unknown publisher.
In this case, the user can confirm the warning to start the application.
The executable is compiled for the x86-64 architecture.

\subsection{Linux}

For the Linux operating system, the application is provided as a single executable file.
The user should ensure that the file has execution permissions.
This can be done through the file manager or by executing the following command in the terminal:

\begin{verbatim}
chmod +x GeoApp.x86_64
\end{verbatim}

When the file has execution permissions, the application can be started by running the \textbf{GeoApp.x86\_64} executable.
The executable is compiled for the x86-64 architecture.

\subsection{macOS}

On the macOS operating system, the application is provided in a \texttt{.zip} archive containing an application bundle.
First, the user should extract the provided \textbf{GeoApp.zip} file.
The user may then optionally move the extracted \textbf{GeoApp.app} file to the \textbf{Applications} folder.
To start the application, the user should run the \textbf{GeoApp.app} application.

Since the application is not digitally signed, a security warning may appear when the application is started for the first time.
When this happens, the user can start the application by right-clicking the \textbf{GeoApp.app} file, selecting \textbf{Open} and confirming the dialog.
Alternatively, the application can be allowed in the system settings under \textbf{Privacy \& Security}.

\section{User manual}

The application consists of several modules, namely \textit{task exploration}, \textit{task solving} and the \textit{playground}.
Each module provides different ways for the user to learn stereometry.

\subsection{Main menu}

Upon starting the application, the user sees the main menu.
The main menu is a central hub from which the rest of the application can be accessed.
The main menu contains several button used to navigate the application.
\begin{itemize}
    \item The \textbf{Explore tasks} button takes the user to the task exploration module,
    \item The \textbf{Solve tasks} button takes the user to the task solving module,
    \item The \textbf{Playground} button takes the user to the playground module,
    \item The \textbf{Settings} button takes the user to the settings,
    \item The \textbf{Quit} button closes the application.
\end{itemize}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/main_menu}
    \caption{The main menu of the application.}
\end{figure}

\subsection{The 3D view}

The 3D view is a part of the task exploration, task solving and playground modules.
When the 3D view is visible, the user can interact with it.

The camera of the 3D view can be moved.
The camera orbits the center of the coordinate system and always looks looks in its direction.
The camera can be rotated up, down, left and right with the \textbf{W}, \textbf{S}, \textbf{A} and \textbf{D} keys respectively.
The camera can be zoomed in with the \textbf{E} key and zoomed out with the \textbf{Q} key.

When a solid is loaded in the 3D view, the user can inspect some of its properties.
When an object (the solid, one of its vertices or one of its edges) is hovered overed by the mouse cursor, it becomes red.
When a hovered vertex or edge is clicked, an informational label appears.
The informational label for a vertex contains its position.
In the playground module, the label also contains the name of the vertex.
The informational label for an edge contains its length.
When an object with a visible informational label is clicked, the informational label disappears.

\begin{figure}[ht]
    \centering
    \begin{subfigure}{0.49\textwidth}
        \includegraphics[width=0.9\linewidth]{graf/3d_view_task}
        \caption{Invisible informational labels.}
    \end{subfigure}
    \begin{subfigure}{0.49\textwidth}
        \includegraphics[width=0.9\linewidth]{graf/3d_view_task_label}
        \caption{Visible informational labels.}
    \end{subfigure}
    \caption{The 3D view as seen in the task exploration and task solving modules.}
\end{figure}

\begin{figure}[ht]
    \centering
    \begin{subfigure}{0.49\textwidth}
        \includegraphics[width=0.9\linewidth]{graf/3d_view_play}
        \caption{Invisible informational labels.}
    \end{subfigure}
    \begin{subfigure}{0.49\textwidth}
        \includegraphics[width=0.9\linewidth]{graf/3d_view_play_label}
        \caption{Visible informational labels.}
    \end{subfigure}
    \caption{The 3D view as seen in the playground module.}
\end{figure}

\subsection{The navigation bar}

Each screen, except for the main menu, features a navigation bar.
The navigation bar appears above the main content of the current screen.
The navigation bar contains five buttons:
\begin{itemize}
    \item The \textbf{Main menu} button transfers the user to the main menu,
    \item The \textbf{Explore tasks} button transfers the user to the task exploration screen,
    \item The \textbf{Solve tasks} button transfers the user to the task selection screen,
    \item The \textbf{Playground} button transfers the user to the playground screen,
    \item The button with the gear icon transfers the user to the settings screen.
\end{itemize}
The button corresponding to the current screen is disabled.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/navbar_explore}
    \caption{The navigation bar as seen in the task exploration screen.}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/navbar_settings}
    \caption{The navigation bar as seen in the settings screen.}
\end{figure}

\subsection{Task exploration}

The purpose of the task exploration module is to teach the user about the tasks available in the application.
Ordered from left to right, the user interface features:
\begin{itemize}
    \item A list of all task, grouped by difficulty. The tasks can also be filtered by their name.
    \item All data describing the task.
        Each parameter can be changed.
        All UI (user interface) elements will update dynamically when a parameter is changed.
    \item The description of the task.
    \item A list of all of the steps required to solve the tasks.
        For each step, there is:
        \begin{itemize}
            \item The description of what should be calculated for the step.
            \item A help button. The button shows a hint for its respective step when pressed.
            \item A number control which displays the correct answer for its respective step.
        \end{itemize}
    \item A view of the selected task.
\end{itemize}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/explore_tasks}
    \caption{The task exploration module.}
\end{figure}

\subsection{Task solving}

The purpose of the task solving module is to test the user's knowledge and skills gained in the task exploration module.
The task solving module is split into two parts.

\subsubsection{Task solving}

The first part is task selection.
Here, the user selects the task they wish to solve.
To select a task, the user must first select a difficulty.
When a difficulty is selected, all available tasks with this difficulty are shown.
Then, the user should select their desired task and press the \textbf{Start} button.
The \textbf{Start} button can be pressed only when a task is selected.
After pressing the \textbf{Start} button, the user is transported to the main part of the task solving module.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/task_filter}
    \caption{Task selection.}
\end{figure}

\newpage

\subsubsection{Task solving}

The parameter values of the task are randomly picked from a predefined range.
The range is defined on a per-parameter basis.
The precision (the number of decimal digits of the value) is also defined on a per-parameter basis.
Inside the main part of the task solving module, the user can find:
\begin{itemize}
    \item The view of the current task,
    \item The description of the task,
    \item The step navigation buttons,
    \item The \textit{step container},
    \item The \textbf{Check answer} button,
    \item The \textbf{Get new task} button.
\end{itemize}
The \textit{step container} is the part of the UI responsible for displaying the task's steps.
The step container looks similar to the one present in the task exploration module.
Despite that, the two differ in several aspects.

First, the user can interact with the number controls.
The number controls are where the user puts their solutions to the task.
The user may edit the value only of the current step's number control.
If the user enters the correct value and presses the \textbf{Check answer} button, a green checkmark symbol appears to the right side of the number control.
If the user enters an incorrect value, a red X symbol appears instead.

Second, only steps up to the current step are visible.
The navigation buttons are used to move between steps.
The \textbf{< Prev} button moves to the previous step.
The \textbf{Next >} button moves to the next step.
The buttons are active only when the user is able to change the current step.
The \textbf{< Prev} button is inactive when the user is on the first step of the task.
The \textbf{Next >} button is inactive when the user is on the last step of the task or the answer for the current step is incorrect.

When the user enters the correct answer for the last step of the task, the task is completed.
When a task is completed, a label with the text "Task complete!" appears under the \textbf{Check answer} button.

The \textbf{Get new task} button resets the current task and provides the user with a new one with randomized values.
Returning to the task selection screen and selecting the same task achieves the same goal.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/task}
    \caption{The default state of the task solving screen.}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/task_solved}
    \caption{The task solving screen after the current task is completed.}
\end{figure}

\newpage

\subsection{Playground}

The playground allows the user to create an arbitrary polyhedron and inspect its properties.
The playground starts empty and the user can add vertices from which the polyhedron is created.
The vertices can be added in several ways.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/playground}
    \caption{The default state of the playground module.}
\end{figure}

\subsubsection{Adding vertices} \label{add_verts}

The easiest way to add vertices is to load a predefined polyhedron.
To do this, the user should select one of the predefined polyhedrons next to the "Load a polyhedron" label.
Next, they should press the \textbf{Load} button to the right.
This loads a predefined set of vertices.

Another way to load a set of vertices is to load them from a file.
To do this, the user should press the \textbf{Load} button next to the "Load a polyhedron from a file" label.
A system file dialog should appear, expecting the user to select a file with the \texttt{.poly} extension.
No example \texttt{.poly} files are provided by default.
A detailed explanation of \texttt{.poly} files is provided in section \ref{poly_files}. % TODO: numer Playground jest

The last way to add a vertex is to use the \textbf{Add new vertex} button next to the "Vertices" label.
This adds a new vertex in the origin of the coordinate system.
When adding vertices this way, the polyhedron may become invalid.
Polyhedron validity is explained in section \ref{poly_valid}.

\subsubsection{The vertex list}

The vertex list is the part of the UI where all of the added vertices are shown.
Each polyhedron vertex corresponds to one entry in the vertex list.
Each entry consists of:
\begin{itemize}
    \item The editable name of the vertex. It is used for display only.
        It appears in the vertex informational label alongside the coordinates.
    \item Three number controls corresponding to the coordinates of the vertex. 
        The first, second and third number controls correspond to the x, y and z coordinates respectively.
    \item The remove button. The vertex is removed when this button is pressed.
    \item A red "Duplicate vertex" warning. This warning appears only when there are multiple vertices with the same coordinates.
\end{itemize}
Changes in the vertex list are immediately reflected in the 3D view.

\subsubsection{Polyhedron validity} \label{poly_valid}

When modifying vertices, the polyhedron may become invalid.
The polyhedron is invalid when it cannot be created from the provided vertices.
A polyhedron which contains concave faces is considered invalid.
Otherwise, it is valid.
When the polyhedron is valid:
\begin{itemize}
    \item The polyhedron in the 3D view is filled, its vertices and edges are shown,
    \item The properties UI displays the values of the polyhedron's area and volume,
    \item No warning is shown.
\end{itemize}
When the polyhedron is invalid:
\begin{itemize}
    \item Only the vertices are shown in the 3D view,
    \item The properties UI displays 0 for both area and volume,
    \item A warning in the form of a red exclamation mark is shown next to the "Vertices" label.
\end{itemize}

It may happen that the user adds two or more vertices with equal coordinates.
All such vertices except the first one are marked as duplicate.
Duplicate vertices show a red "Duplicate vertex" warning in the vertex list.
When there are any duplicate vertices, the polyhedron is considered invalid.

\subsubsection{Polyhedron files} \label{poly_files}

A polyhedron file is a file that stores all of the data of one polyhedron.
Polyhedron files have the \texttt{.poly} extension.
They can be created in the playground module.
A polyhedron file is created with the use of the \textbf{Save to file} button near the "Vertices" label.
When the \textbf{Save to file} button is pressed, a system file dialog appears.
The user may save the polyhedron to a file even if the polyhedron is invalid.
In the dialog, the user should specify the name of the file and where to save it.
After the file is saved, it is ready to be loaded.
The instructions on how to load a polyhedron file are provided in section \ref{add_verts}.

% \subsubsection{Other}

\subsection{Settings}

The settings screen allows the user to change certain behaviors of the application.
Settings are split into two sections.
The \textit{Camera} section contains two settings related to the camera of the 3D view:
\begin{itemize}
    \item The \textit{Move speed} setting determines the rotation speed. It is expressed in degrees per second.
    \item The \textit{Zoom speed} setting determines the zoom speed. It is expressed in the 3D view world units per second.
\end{itemize}

The \textit{Playground} section contains one setting related to the playground module.
The \textit{Coordinate precision} setting determines how precisely the vertices can be placed.
It is expressed in the number of decimal digits.

The settings are stored in a \textbf{settings.cfg} file
The location of this file is platform-dependent:

\bigskip

\begin{tabularx}{0.9\linewidth}{|l|X|}
    \hline
    Platform & Location \\
    \hline
    Windows & \texttt{\%APPDATA\%\textbackslash GeoApp} \\
    \hline
    Linux & \texttt{\textasciitilde/.local/share/GeoApp} \\
    \hline
    macOS & \texttt{\textasciitilde/Library/Application Support/GeoApp} \\
    \hline
\end{tabularx}

\bigskip

The user should not modify this file manually.
If the file is modified in a way that the application cannot read it correctly, the settings are set to the default values.
The file is then saved in the correct format.
The same happens when the file is deleted.

If the user manually enters a value outside of the range defined by the setting, the value is constrained to the defined range.
The file is not changed and contains the value entered manually.

\begin{lstlisting}[basicstyle=\ttfamily, showstringspaces=false, caption=The default content of the \textbf{settings.cfg} file.]
[settings]

"Move speed"=120.0
"Zoom speed"=5.0
"Coordinate precision"=0
\end{lstlisting}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{graf/settings}
    \caption{The settings screen.}
\end{figure}

% \begin{tabular}{ |c|c|c| } 
%  \hline
%  cell1 & cell2 & cell3 \\ 
%  cell4 & cell5 & cell6 \\ 
%  cell7 & cell8 & cell9 \\ 
%  \hline
% \end{tabular}

% \begin{itemize}
% \item hardware and software requirements
% \item installation procedure
% \item activation procedure
% \item types of users
% \item user manual
% \item system administration
% \item security issues
% \item example of usage
% \item working scenarios (with screenshots or output files)
% \end{itemize}
 
% \begin{figure}
% \centering
% \begin{tikzpicture}
% \begin{axis}[
%     y tick label style={
%         /pgf/number format/.cd,
%             fixed,    
%             fixed zerofill, % 1.0 zamiast 1
%             precision=1,
%         /tikz/.cd
%     },
%     x tick label style={
%         /pgf/number format/.cd,
%             fixed,
%             fixed zerofill,
%             precision=2,
%         /tikz/.cd
%     }
% ]
% \addplot [domain=0.0:0.1] {rnd};
% \end{axis} 
% \end{tikzpicture}
% \caption{Figure caption (below the figure).}
% \label{fig:2}
% \end{figure}

%%%%%%%%%%%%%%%%%%%%%
% FIGURE FROM FILE
%
%\begin{figure}
%\centering
%\includegraphics[width=0.5\textwidth]{./graf/politechnika_sl_logo_bw_pion_en.pdf}
%\caption{Caption of a figure is always below the figure.}
%\label{fig:label}
%\end{figure}
%Fig. \ref{fig:label} presents â€¦
%%%%%%%%%%%%%%%%%%%%%
%
%%%%%%%%%%%%%%%%%%%%
%% SUBFIGURES
%
%\begin{figure}
%\centering
%\begin{subfigure}{0.4\textwidth}
%    \includegraphics[width=\textwidth]{./graf/politechnika_sl_logo_bw_pion_en.pdf}
%    \caption{Upper left figure.}
%    \label{fig:upper-left}
%\end{subfigure}
%\hfill
%\begin{subfigure}{0.4\textwidth}
%    \includegraphics[width=\textwidth]{./graf/politechnika_sl_logo_bw_pion_en.pdf}
%    \caption{Upper right figure.}
%    \label{fig:upper-right}
%\end{subfigure}
%
%\begin{subfigure}{0.4\textwidth}
%    \includegraphics[width=\textwidth]{./graf/politechnika_sl_logo_bw_pion_en.pdf}
%    \caption{Lower left figure.}
%    \label{fig:lower-left}
%\end{subfigure}
%\hfill
%\begin{subfigure}{0.4\textwidth}
%    \includegraphics[width=\textwidth]{./graf/politechnika_sl_logo_bw_pion_en.pdf}
%    \caption{Lower right figure.}
%    \label{fig:lower-right}
%\end{subfigure}
%        
%\caption{Common caption for all subfigures.}
%\label{fig:subfigures}
%\end{figure}
%Fig. \ref{fig:subfigures} presents very important information, eg. Fig. \ref{fig:upper-right} is an upper right subfigure.
%%%%%%%%%%%%%%%%%%%%%
